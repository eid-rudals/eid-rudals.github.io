<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>EID 감정유형 테스트</title>

  <!-- Kakao SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js" crossorigin="anonymous"></script>
  <script>
    Kakao.init("934e47a028ff3731959cca6342dddfed");
  </script>

  <!-- OG -->
  <meta property="og:title" content="EID 감정유형 테스트" />
  <meta property="og:description" content="5가지 감정축 기반 성향 분석. 당신의 감정 패턴은 무엇인가요?" />
  <meta property="og:image" content="https://eid-test.com/og.png" />
  <meta property="og:url" content="https://eid-test.com" />
  <meta property="og:type" content="website" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="반응 속도 · 표현 방식 · 회복력 · 공명 · 조절력 다섯 축으로 감정 사용 습관을 진단하는 EID 감정 패턴 검사"
  />

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SSVH87DKXR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-SSVH87DKXR');

    function trackEvent(name, params) {
      if (typeof gtag === 'function') gtag('event', name, params || {});
    }
  </script>

  <!-- PDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root {
      --bg: #050816;
      --bg-soft: #0b1020;
      --card: rgba(12, 16, 32, 0.82);
      --card-soft: rgba(19, 26, 48, 0.94);
      --border-soft: rgba(148, 163, 184, 0.3);
      --accent: #6366f1;
      --accent-soft: rgba(129, 140, 248, 0.16);
      --accent-strong: #4f46e5;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --text-muted: #6b7280;
      --radius-xl: 32px;
      --shadow-soft: 0 24px 60px rgba(0, 0, 0, 0.65);
      --shadow-card: 0 18px 45px rgba(15, 23, 42, 0.7);
      --blur: 22px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo",
        "Noto Sans KR", sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.28), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(14, 165, 233, 0.26), transparent 55%),
        radial-gradient(circle at 50% 100%, rgba(56, 189, 248, 0.12), transparent 55%),
        linear-gradient(145deg, #020617, #020617);
      display: flex;
      justify-content: center;
    }

    .page { width: 100%; max-width: 1120px; padding: 32px 20px 40px; }

    header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 32px;
    }

    .brand { display: flex; align-items: center; gap: 10px; font-weight: 600; letter-spacing: 0.02em; }
    .brand-mark {
      width: 32px; height: 32px; border-radius: 999px;
      background: conic-gradient(from 200deg, #38bdf8, #6366f1, #a855f7, #ec4899, #f97316, #22c55e, #38bdf8);
      padding: 3px;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.4);
    }
    .brand-mark-inner {
      width: 100%; height: 100%; border-radius: inherit;
      background: radial-gradient(circle at 30% 20%, #e5e7eb, #020617);
    }
    .brand-name { font-size: 15px; color: #e5e7eb; }
    .brand-sub { font-size: 12px; color: var(--text-muted); }

    .pill {
      border-radius: 999px; padding: 6px 12px; font-size: 12px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.7);
      color: var(--text-soft);
      display: inline-flex; align-items: center; gap: 6px;
    }
    .pill-dot { width: 8px; height: 8px; border-radius: 999px; background: radial-gradient(circle at 30% 30%, #a5b4fc, #4f46e5); }

    main { display: flex; flex-direction: column; gap: 24px; }

    .shell {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.96));
      border-radius: var(--radius-xl);
      padding: 28px 26px 26px;
      backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.28);
      position: relative;
      overflow: hidden;
    }
    .shell::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 10% 0%, rgba(56, 189, 248, 0.18), transparent 55%),
        radial-gradient(circle at 90% 10%, rgba(129, 140, 248, 0.16), transparent 55%),
        radial-gradient(circle at 50% 100%, rgba(56, 189, 248, 0.08), transparent 60%);
      opacity: 0.55;
      z-index: -1;
    }

    .shell-inner {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.4fr);
      gap: 32px;
      align-items: center;
    }
    @media (max-width: 880px) {
      .shell-inner { grid-template-columns: minmax(0, 1fr); gap: 26px; }
    }

    .hero-title-wrap { margin-bottom: 16px; }
    .eyebrow {
      font-size: 13px; color: var(--accent-soft); margin-bottom: 6px;
      display: flex; align-items: center; gap: 6px;
    }
    .eyebrow span.badge {
      padding: 3px 9px; border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 11px; color: #e5e7eb;
    }

    h1 { font-size: 32px; line-height: 1.25; margin: 0; letter-spacing: -0.03em; }
    .hero-sub { font-size: 14px; color: var(--text-soft); margin-top: 10px; margin-bottom: 20px; }
    .hero-sub em { font-style: normal; color: #c4b5fd; }

    .steps { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 14px; }
    @media (max-width: 880px) { .steps { grid-template-columns: minmax(0, 1fr); } }

    .step-card {
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.3), rgba(15, 23, 42, 0.96));
      border-radius: 20px;
      padding: 16px 15px 14px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: var(--shadow-card);
      position: relative;
      overflow: hidden;
    }
    .step-card::after {
      content: "";
      position: absolute; inset: 0;
      background: radial-gradient(circle at 15% 0%, rgba(129, 140, 248, 0.25), transparent 55%);
      opacity: 0.7; mix-blend-mode: screen; pointer-events: none;
    }
    .step-label { font-size: 11px; color: #cbd5f5; margin-bottom: 6px; display: inline-flex; align-items: center; gap: 4px; }
    .step-label span.dot { width: 6px; height: 6px; border-radius: 999px; background: #a5b4fc; }
    .step-title { font-size: 14px; color: #e5e7eb; font-weight: 600; margin-bottom: 6px; }
    .step-desc { font-size: 12px; color: #9ca3af; line-height: 1.55; }

    .hero-right { display: flex; flex-direction: column; gap: 16px; }

    .stats-card {
      border-radius: 20px;
      padding: 16px 18px 14px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(148, 163, 184, 0.45);
      box-shadow: var(--shadow-card);
    }
    .stats-title {
      font-size: 13px; color: #d1d5db; margin-bottom: 10px;
      display: flex; align-items: center; justify-content: space-between; gap: 10px;
    }
    .stats-grid {
      display: grid; grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px; font-size: 12px; color: var(--text-soft);
    }
    .stat-item {
      padding: 9px 10px; border-radius: 14px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(55, 65, 81, 0.9);
      display: flex; flex-direction: column; gap: 4px;
    }
    .stat-label { font-size: 11px; color: var(--text-muted); }
    .stat-value { font-size: 13px; color: #e5e7eb; font-weight: 500; }

    .pill-soft {
      padding: 4px 8px; border-radius: 999px; font-size: 11px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(75, 85, 99, 0.9);
      color: var(--text-soft);
    }

    .hero-note { font-size: 11px; color: var(--text-muted); line-height: 1.6; }

    .hero-actions {
      margin-top: 18px;
      display: flex; align-items: center; gap: 10px;
      flex-wrap: wrap;
    }
    .btn-primary {
      border: none; outline: none; cursor: pointer;
      padding: 13px 22px; border-radius: 999px;
      font-size: 14px; font-weight: 600; letter-spacing: 0.01em;
      color: #f9fafb;
      background: radial-gradient(circle at 0% 0%, #22c55e, transparent 55%),
        linear-gradient(135deg, var(--accent-strong), #22c55e);
      box-shadow: 0 14px 40px rgba(56, 189, 248, 0.6);
      display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-primary span.chevron { font-size: 18px; transform: translateY(1px); }
    .btn-secondary {
      border-radius: 999px; border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      padding: 10px 14px; font-size: 12px; color: var(--text-soft);
      display: inline-flex; align-items: center; gap: 6px;
    }

    .section { display: none; }
    .section.active { display: block; }

    /* 질문 섹션 */
    .question-shell {
      margin-top: 18px;
      background:
        radial-gradient(circle at 0% 0%, rgba(129, 140, 248, 0.12), transparent 60%),
        radial-gradient(circle at 100% 0%, rgba(45, 212, 191, 0.12), transparent 60%),
        linear-gradient(145deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      border-radius: var(--radius-xl);
      padding: 24px 22px 26px;
      backdrop-filter: blur(var(--blur));
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow: var(--shadow-soft);
    }
    .q-header {
      display: flex; justify-content: space-between;
      gap: 12px; align-items: center;
      margin-bottom: 20px;
    }
    .q-title { font-size: 15px; color: #e5e7eb; font-weight: 600; }
    .q-step { font-size: 12px; color: var(--text-muted); }

    .progress {
      width: 100%; height: 6px; border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      overflow: hidden; margin-top: 6px;
      border: 1px solid rgba(31, 41, 55, 1);
    }
    .progress-fill {
      height: 100%; width: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, #22c55e, #38bdf8, #6366f1);
      transition: width 0.3s ease-out;
    }
    .progress-text { font-size: 11px; color: var(--text-muted); margin-top: 6px; }

    .q-body { margin-top: 16px; }
    .q-text {
      font-size: 17px; line-height: 1.6; color: #e5e7eb;
      letter-spacing: -0.01em;
      margin-bottom: 18px;
    }
    .q-scale-labels {
      display: flex; justify-content: space-between;
      font-size: 11px; color: var(--text-muted);
      margin-bottom: 8px; padding: 0 4px;
    }
    .scale-row { display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; }

    .scale-btn {
      flex: 1 1 0; min-width: 0;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-soft);
      font-size: 12px;
      padding: 9px 4px;
      cursor: pointer;
      display: flex; flex-direction: column; align-items: center; gap: 3px;
      transition: all 0.18s ease-out;
    }
    .scale-btn .num { font-size: 12px; opacity: 0.8; }
    .scale-btn .label { font-size: 11px; white-space: nowrap; }

    .scale-btn:hover {
      border-color: var(--accent);
      background: radial-gradient(circle at 0% 0%, rgba(129, 140, 248, 0.16), transparent 60%),
        rgba(15, 23, 42, 1);
      color: #e5e7eb;
      transform: translateY(-1px);
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.9);
    }
    .scale-btn.selected {
      border-color: var(--accent);
      background: radial-gradient(circle at 0% 0%, rgba(129, 140, 248, 0.3), transparent 60%),
        rgba(15, 23, 42, 1);
      color: #e5e7eb;
      box-shadow: 0 12px 34px rgba(37, 99, 235, 0.6);
    }

    .q-footer { margin-top: 18px; display: flex; justify-content: flex-start; }
    .btn-prev {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      padding: 7px 14px;
      font-size: 12px;
      color: var(--text-soft);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn-prev:disabled { opacity: 0.4; cursor: default; }
    @media (max-width: 640px) { .scale-btn .label { font-size: 10px; } }

    /* 결과 섹션 */
    .result-shell {
      margin-top: 18px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.97), rgba(15, 23, 42, 1));
      border-radius: var(--radius-xl);
      padding: 24px 22px 26px;
      border: 1px solid rgba(148, 163, 184, 0.32);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(var(--blur));
    }
    .result-header { display: flex; align-items: center; gap: 16px; margin-bottom: 12px; }

    .avatar {
      width: 72px; height: 72px;
      border-radius: 24px;
      display: flex; align-items: center; justify-content: center;
      box-shadow: var(--shadow-card);
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at 0% 0%, rgba(129, 140, 248, 0.35), rgba(15, 23, 42, 1));
    }
    .avatar img { width: 100%; height: 100%; object-fit: contain; display: block; }

    .result-main-title { font-size: 20px; margin-bottom: 4px; }
    .result-badge { font-size: 12px; color: var(--text-soft); }

    .share-invite {
      margin: 10px 0 18px;
      text-align: center;
      padding: 12px 12px 10px;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.28);
      background: rgba(15, 23, 42, 0.55);
    }
    .share-invite .t1 { font-size: 15px; font-weight: 700; color: #e5e7eb; margin-bottom: 6px; }
    .share-invite .t2 { font-size: 12px; color: #9ca3af; margin-bottom: 12px; }

    .share-wrapper { display: flex; gap: 10px; align-items: center; justify-content: center; margin-top: 6px; flex-wrap: wrap; }

    .share-btn {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 8px 14px; border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-soft);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.18s;
    }
    .share-btn:hover { border-color: var(--accent); color: #e5e7eb; transform: translateY(-1px); }
    .share-icon { width: 18px; height: 18px; object-fit: cover; border-radius: 5px; }

    .result-body {
      margin-top: 10px;
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.3fr);
      gap: 22px;
    }
    @media (max-width: 880px) { .result-body { grid-template-columns: minmax(0, 1fr); } }

    .result-desc { font-size: 13px; color: var(--text-soft); line-height: 1.7; margin-bottom: 12px; }
    .pill-keyword {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 4px 10px; border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid rgba(129, 140, 248, 0.6);
      font-size: 11px; color: #e5e7eb;
      margin-bottom: 10px;
    }

    .result-list-block { font-size: 12px; }
    .result-list-block h3 { font-size: 12px; margin: 0 0 6px; color: #e5e7eb; }
    .result-list { list-style: none; margin: 0; padding-left: 0; display: flex; flex-direction: column; gap: 4px; color: var(--text-soft); }
    .result-list li::before { content: "• "; color: var(--accent); }

    .result-graph {
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      font-size: 12px;
      color: var(--text-soft);
      display: flex; flex-direction: column; gap: 8px;
    }
    .graph-row { display: grid; grid-template-columns: 80px minmax(0, 1fr) 40px; gap: 8px; align-items: center; }
    .graph-label { font-size: 11px; color: var(--text-muted); }

    .graph-bar-bg {
      width: 100%; height: 8px; border-radius: 999px;
      background: rgba(15, 23, 42, 1);
      overflow: hidden;
      border: 1px solid rgba(31, 41, 55, 1);
    }
    .graph-bar-fill {
      height: 100%; width: 0; border-radius: inherit;
      background: linear-gradient(90deg, #22c55e, #38bdf8, #6366f1);
      transition: width 0.45s ease-out;
    }
    .graph-value { font-size: 11px; text-align: right; color: #e5e7eb; }

    .footer-note { margin-top: 20px; font-size: 11px; color: var(--text-muted); line-height: 1.6; }

    .report-actions {
      margin-top: 18px;
      padding-top: 16px;
      border-top: 1px solid rgba(55, 65, 81, 0.9);
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }
    .report-text { font-size: 12px; color: var(--text-soft); line-height: 1.6; }
    .btn-download {
      border: none; outline: none; cursor: pointer;
      padding: 10px 18px; border-radius: 999px;
      font-size: 13px; font-weight: 600; letter-spacing: 0.01em;
      color: #f9fafb;
      background: radial-gradient(circle at 0% 0%, #22c55e, transparent 55%),
        linear-gradient(135deg, var(--accent-strong), #22c55e);
      box-shadow: 0 10px 28px rgba(56, 189, 248, 0.55);
      display: inline-flex; align-items: center; gap: 6px;
      white-space: nowrap;
    }
    .btn-download span.icon { font-size: 16px; }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="brand">
        <div class="brand-mark"><div class="brand-mark-inner"></div></div>
        <div>
          <div class="brand-name">EID Emotion ID</div>
          <div class="brand-sub">감정 패턴 분석 검사</div>
        </div>
      </div>
      <span class="pill"><span class="pill-dot"></span>개인용 테스트</span>
    </header>

    <main>
      <!-- INTRO -->
      <section id="intro" class="section active">
        <div class="shell">
          <div class="shell-inner">
            <div>
              <div class="hero-title-wrap">
                <div class="eyebrow">
                  <span class="badge">EID Emotion ID</span>
                  <span>반응 · 표현 · 회복 · 공명 · 조절 5축 감정 성향 진단</span>
                </div>
                <h1>
                  당신의 감정 사용 습관을<br />
                  <strong>8가지 EID 유형</strong>으로 진단합니다.
                </h1>
                <p class="hero-sub">
                  같은 상황에서도 사람마다 감정을 느끼고 쓰는 방식은
                  <em>크게 다릅니다.</em><br />
                  EID 감정유형 테스트는
                  <strong>반응 속도 · 표현 방식 · 회복력 · 공명(공감) · 조절</strong>
                  다섯 축을 통해<br />
                  당신의 감정 패턴을 구조적으로 살펴보는 성향 검사입니다.
                </p>
              </div>

              <div class="steps">
                <div class="step-card">
                  <div class="step-label"><span class="dot"></span>1단계</div>
                  <div class="step-title">테스트 진행</div>
                  <p class="step-desc">
                    40개의 질문에 답하면서, 평소의 반응과 행동 패턴을 체크합니다.
                  </p>
                </div>

                <div class="step-card">
                  <div class="step-label"><span class="dot"></span>2단계</div>
                  <div class="step-title">EID 유형 분석</div>
                  <p class="step-desc">
                    5개 축 점수를 기반으로 8가지 EID 코드 중 하나를 산출합니다.
                  </p>
                </div>

                <div class="step-card">
                  <div class="step-label"><span class="dot"></span>3단계</div>
                  <div class="step-title">활용 가이드</div>
                  <p class="step-desc">
                    강점·주의점·생활 활용 팁을 제공해 감정을 더 효율적으로 쓰는 방향을 제안합니다.
                  </p>
                </div>
              </div>
            </div>

            <div class="hero-right">
              <div class="stats-card">
                <div class="stats-title">
                  검사 정보
                  <span class="pill-soft">베타 · 무료</span>
                </div>
                <div class="stats-grid">
                  <div class="stat-item"><div class="stat-label">소요 시간</div><div class="stat-value">약 5분</div></div>
                  <div class="stat-item"><div class="stat-label">문항 수</div><div class="stat-value">총 40문항</div></div>
                  <div class="stat-item"><div class="stat-label">검사 유형</div><div class="stat-value">감정 패턴</div></div>
                  <div class="stat-item"><div class="stat-label">이용 비용</div><div class="stat-value">전액 무료</div></div>
                </div>
                <p class="hero-note">
                  결과는 참고용이며, 임상 진단이나 치료를 대신하지 않습니다.
                  응답 내용은 익명 처리되며 서버에 별도 저장되지 않습니다.
                </p>
                <div class="hero-actions">
                  <button class="btn-primary" type="button" onclick="startTest()">
                    무료 테스트 시작하기 <span class="chevron">›</span>
                  </button>
                  <div class="btn-secondary">
                    <span style="font-size: 13px;">ⓘ</span>
                    평균 5분 내외로 완료됩니다.
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </section>

      <!-- QUESTION -->
      <section id="question" class="section">
        <div class="question-shell">
          <div class="q-header">
            <div style="width:100%;">
              <div class="q-title">EID 감정유형 테스트</div>
              <div class="q-step" id="qStep"></div>
              <div class="progress"><div id="progressFill" class="progress-fill"></div></div>
              <div id="progressText" class="progress-text">0% 진행됨</div>
            </div>
          </div>

          <div class="q-body">
            <div class="q-text" id="qText"></div>

            <div class="q-scale-labels">
              <span>전혀 아니다</span>
              <span>매우 그렇다</span>
            </div>
            <div id="scaleButtons" class="scale-row"></div>
          </div>

          <div class="q-footer">
            <button id="prevBtn" class="btn-prev" type="button" onclick="prevQuestion()">← 이전 질문</button>
          </div>
        </div>
      </section>

      <!-- RESULT -->
      <section id="result" class="section">
        <div class="result-shell">
          <div class="result-header">
            <div id="typeAvatar" class="avatar">✨</div>
            <div>
              <div id="typeName" class="result-main-title">EID 유형</div>
              <div id="typeOneLine" class="result-badge">당신의 감정 사용 패턴을 정리한 결과입니다.</div>
            </div>
          </div>

          <div class="share-invite">
            <div class="t1">친구·가족과 결과를 비교해볼까요?</div>
            <div class="t2">아래 버튼으로 링크를 공유하면 바로 테스트를 할 수 있어요.</div>
            <div class="share-wrapper">
              <button class="share-btn share-kakao" type="button">
                <img src="https://cdn-icons-png.flaticon.com/512/3670/3670042.png" alt="카카오톡 공유" class="share-icon" />
                카카오톡 공유
              </button>
              <button class="share-btn share-insta" type="button">
                <img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" alt="인스타그램 공유" class="share-icon" />
                인스타그램 공유
              </button>
            </div>
          </div>

          <div class="result-body">
            <div>
              <div id="typeKeyword" class="pill-keyword">감정 코드</div>
              <p id="typeDesc" class="result-desc">
                각 유형은 좋고 나쁨을 나누기 위한 것이 아니라, 감정을 쓰는 방식의 차이를 설명하기 위한 코드입니다.
              </p>

              <div class="result-graph">
                <div class="graph-row">
                  <div class="graph-label">반응 속도</div>
                  <div class="graph-bar-bg"><div id="bar-rs" class="graph-bar-fill"></div></div>
                  <div id="val-rs" class="graph-value">0%</div>
                </div>
                <div class="graph-row">
                  <div class="graph-label">표현</div>
                  <div class="graph-bar-bg"><div id="bar-ex" class="graph-bar-fill"></div></div>
                  <div id="val-ex" class="graph-value">0%</div>
                </div>
                <div class="graph-row">
                  <div class="graph-label">회복력</div>
                  <div class="graph-bar-bg"><div id="bar-rc" class="graph-bar-fill"></div></div>
                  <div id="val-rc" class="graph-value">0%</div>
                </div>
                <div class="graph-row">
                  <div class="graph-label">공명</div>
                  <div class="graph-bar-bg"><div id="bar-em" class="graph-bar-fill"></div></div>
                  <div id="val-em" class="graph-value">0%</div>
                </div>
                <div class="graph-row">
                  <div class="graph-label">조절</div>
                  <div class="graph-bar-bg"><div id="bar-reg" class="graph-bar-fill"></div></div>
                  <div id="val-reg" class="graph-value">0%</div>
                </div>
              </div>
            </div>

            <div class="result-list-block">
              <h3>이 유형의 강점</h3>
              <ul id="typeStrengths" class="result-list"></ul>
              <h3 style="margin-top: 10px;">주의할 점</h3>
              <ul id="typeWarnings" class="result-list"></ul>
            </div>
          </div>

          <p class="footer-note">
            이 결과는 현재 당신의 경향을 설명하는 것이며, 상황·환경·경험에 따라 달라질 수 있습니다.
            감정은 ‘고쳐야 할 것’이 아니라 ‘어떻게 사용할지 선택할 수 있는 자원’입니다.
          </p>

          <div class="report-actions">
            <div class="report-text">
              <strong>기본 리포트 PDF (무료)</strong><br />
              지금 보이는 결과 카드 그대로를 한 장짜리 PDF로 저장할 수 있어요.
            </div>
            <button class="btn-download" type="button" onclick="downloadBasicPdf()">
              <span class="icon">⬇</span>
              기본 PDF 다운로드
            </button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ====== 고정 URL(공유/OG 일치) ======
    const CANONICAL_URL = "https://eid-test.com";

    // ====== 질문(40) ======
    const questions = [
      // 0~7 : 반응 속도(rs)
      "단톡방 분위기가 갑자기 어색해지면, 다른 일을 하다가도 바로 신경이 그쪽으로 쏠린다.",
      "모임에서 누군가 표정이 굳으면, 이유를 몰라도 나도 같이 긴장되기 시작한다.",
      "누가 다급한 목소리로 부르면, 내용보다 톤이 먼저 귀에 꽂힌다.",
      "갑작스러운 질문이나 요청이 들어오면, ‘왜?’보다 ‘헉’이 먼저 든다.",
      "상대의 표정이 살짝 굳기만 해도, ‘무슨 일 있나?’ 하는 생각이 거의 자동으로 올라온다.",
      "작은 충돌이나 의견 차이도 생기자마자 분위기 변화가 빨리 느껴진다.",
      "대화 중 갑자기 톤이 바뀌면, 내용보다 분위기 변화를 더 빨리 감지한다.",
      "중요한 일정이 잡히면, 준비보다 먼저 들뜸이나 긴장감이 크게 올라온다.",

      // 8~15 : 표현(ex)
      "친한 사람과 있을 때는, 기분이 좋으면 말투·표정에서 바로 티가 나는 편이다.",
      "속상한 일이 있으면 하루쯤은 표정이나 말수가 확 줄어드는 게 스스로도 느껴진다.",

      // ✅ 11번(문항 11): 네가 말한 문장으로 고정 (축은 아래 axisMap에서 reg로 처리)
      "집에 오면 아무것도 하기 싫고, 그냥 멍하니 쉬고만 싶다.",

      "화가 나거나 억울한 일이 있으면, ‘나 화났다’는 게 말투에서 거의 숨겨지지 않는다.",
      "힘든 일이 있어도 ‘괜찮아’라고 웃어 넘기고, 웬만하면 표정을 유지하려 한다.",
      "모임 자리에서는 내 컨디션과 상관없이, 분위기를 위해 일부러 더 밝게 행동하는 편이다.",
      "정말 힘들 때도, 내 상태를 알리는 것보다 혼자 조용히 버티는 쪽이 더 편하다.",
      "주변 사람들이 ‘너는 속마음이 얼굴에 잘 안 드러나는 편이야’라고 말한 적이 있다.",

      // 16~23 : 회복력(rc)
      "하루 동안 기분 나빴던 일이 있어도, 다음 날 아침에는 ‘새 판 깔린 느낌’이 드는 편이다.",
      "실수하거나 창피한 일을 겪어도, ‘다음에 잘하면 되지’ 하고 비교적 빨리 넘기는 편이다.",
      "스트레스가 쌓이면, 산책·취미·혼자만의 루틴으로 조금씩 정리가 되는 경험을 한다.",
      "일이 틀어져도 ‘그래도 여기까진 해냈다’며 나름대로 의미를 찾아보려 한다.",
      "마음이 무너지면, 잠을 자고 일어나도 며칠씩 기운이 돌아오지 않는 편이다.",
      "예전에 했던 실수나 상처되는 장면이, 몇 년이 지나도 가끔 생생하게 떠오른다.",
      "컨디션이 정말 바닥까지 떨어져도, 어느 순간 ‘이제 다시 해보자’ 하는 힘이 올라온다.",
      "한 번 깊이 실망한 사람이나 상황은, 회복하는 데 정말 오랜 시간이 걸리는 편이다.",

      // 24~31 : 공명(em)
      "지하철이나 카페에서 우울해 보이는 사람을 보면, 그 사람 사연을 상상하게 될 때가 많다.",
      "지인에게 힘든 이야기를 들으면, 집에 돌아와서도 그 장면이 떠올라 마음이 무거워진다.",
      "드라마·영화를 볼 때, 인물의 감정에 몰입해서 같이 웃고 울다가 끝나는 편이다.",
      "모임에서 누군가 혼자 따로 떨어져 있으면, 괜히 신경이 쓰이고 챙겨주고 싶어진다.",
      "주변 사람이 예민해져 있어도, ‘내 일이 아니면’ 적당히 거리를 두려고 하는 편이다.",
      "뉴스나 댓글에서 부정적인 내용을 오래 보다 보면, 내 기분까지 쉽게 가라앉는다.",
      "지인이 한마디 툭 던진 말을, ‘혹시 이런 뜻이었나?’ 하며 여러 번 곱씹는 편이다.",
      "다른 사람의 감정 기복에 크게 끌려다니지 않고, 내 컨디션을 우선 챙기려는 편이다.",

      // 32~39 : 조절(reg)
      "기분이 확 상하면, 계획과 상관없이 바로 말이나 행동이 먼저 튀어나오는 편이다.",
      "회의나 중요한 대화에서, 감정이 올라와도 일단 상황 정리부터 하려고 한다.",
      "화를 내고 싶을 때도, ‘지금 여기서 다 터뜨리면 손해다’라는 계산이 먼저 돌아간다.",
      "기분에 따라 하고 싶은 말이 많아져도, ‘지금은 말 안 하는 게 낫다’며 삼키는 편이다.",
      "기분이 안 좋으면, 쇼핑·배달·폭식·게임 등으로 즉시 해소하려는 패턴이 있다.",
      "중요한 결정을 할 때, 순간 감정보다 자료와 정보부터 찾아보는 편이다.",
      "힘든 일이 겹치면, 해야 할 일을 정리하기보다 그냥 멍하니 시간을 보내버릴 때가 많다.",
      "갈등 상황에서 감정이 욱 올라오면, 그 자리에서 정리하기보다 일단 피하고 싶어진다."
    ];

    const TOTAL = questions.length;
    let idx = 0;

    // ====== 축 매핑(문항 순서와 축을 분리) ======
    // rs/ex/rc/em/reg 중 하나로 각 문항이 어디 점수에 들어갈지 지정
    // ✅ 11번(인덱스 10)을 reg로 지정해서 “의미 일치”시키는 게 핵심
    const axisMap = [
      // 0~7
      "rs","rs","rs","rs","rs","rs","rs","rs",
      // 8~15 (기본 ex였지만, 10번은 reg로 빼서 의미를 맞춤)
      "ex","ex","reg","ex","ex","ex","ex","ex",
      // 16~23
      "rc","rc","rc","rc","rc","rc","rc","rc",
      // 24~31
      "em","em","em","em","em","em","em","em",
      // 32~39
      "reg","reg","reg","reg","reg","reg","reg","reg"
    ];

    // ====== 역채점 문항 ======
    // agree가 높을수록 "낮은 점수"가 되어야 하는 문항들
    const reverseIndices = new Set([
      // 표현 숨김/안 드러남 계열
      12, 14, 15,
      // 회복력 낮음
      20, 21, 23,
      // 공명 낮음(거리두기, 내 컨디션 우선)
      28, 31,
      // 조절 낮음(충동, 해소패턴, 멍함, 회피)
      32, 36, 38, 39,
      // ✅ 11번(집에 오면 아무것도 하기 싫다): reg 저하로 역채점 처리
      10
    ]);

    const answers = Array(TOTAL).fill(null); // 1~5
    const scores = { rs: 0, ex: 0, rc: 0, em: 0, reg: 0 };
    const counts = { rs: 0, ex: 0, rc: 0, em: 0, reg: 0 };

    function showSection(id) {
      ["intro", "question", "result"].forEach((sec) => {
        const el = document.getElementById(sec);
        if (el) el.classList.remove("active");
      });
      const target = document.getElementById(id);
      if (target) target.classList.add("active");
    }

    function startTest() {
      idx = 0;
      for (let i = 0; i < TOTAL; i++) answers[i] = null;

      trackEvent('test_start', { event_category: 'engagement', event_label: 'EID 감정유형 테스트' });

      showSection("question");
      renderQuestion();
    }

    // 척도 버튼 생성
    const scaleArea = document.getElementById("scaleButtons");
    if (scaleArea && scaleArea.children.length === 0) {
      const scaleConfig = [
        { num: "1", label: "전혀 아니다" },
        { num: "2", label: "그렇지 않은 편" },
        { num: "3", label: "보통이다" },
        { num: "4", label: "그런 편이다" },
        { num: "5", label: "매우 그렇다" }
      ];
      scaleConfig.forEach((item, i) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "scale-btn";
        btn.innerHTML = `<span class="num">${item.num}</span><span class="label">${item.label}</span>`;
        btn.onclick = () => answer(i + 1);
        scaleArea.appendChild(btn);
      });
    }

    function updateProgress() {
      const answeredCount = answers.filter(v => v !== null).length;
      const percent = (answeredCount / TOTAL) * 100;
      const progressFill = document.getElementById("progressFill");
      const progressText = document.getElementById("progressText");
      if (progressFill) progressFill.style.width = percent + "%";
      if (progressText) progressText.textContent = `${Math.round(percent)}% 진행됨`;
    }

    function renderQuestion() {
      if (idx >= TOTAL) return finishTest();

      const qEl = document.getElementById("qText");
      const stepEl = document.getElementById("qStep");
      const prevBtn = document.getElementById("prevBtn");

      if (qEl) qEl.textContent = questions[idx];
      if (stepEl) stepEl.textContent = `질문 ${idx + 1} / ${TOTAL}`;
      if (prevBtn) prevBtn.disabled = idx === 0;

      const allBtns = document.querySelectorAll(".scale-btn");
      allBtns.forEach((btn, i) => {
        btn.classList.remove("selected");
        if (answers[idx] === i + 1) btn.classList.add("selected");
      });

      updateProgress();
    }

    function answer(value) {
      if (idx >= TOTAL) return;
      answers[idx] = value;

      if (idx === TOTAL - 1) finishTest();
      else { idx++; renderQuestion(); }
    }

    function prevQuestion() {
      if (idx > 0) { idx--; renderQuestion(); }
    }

    function normalize(sum, count) {
      // count 문항, 각 문항 1~5 => 최소 count*1, 최대 count*5
      const min = count * 1;
      const max = count * 5;
      const denom = (max - min) || 1;
      return (sum - min) / denom; // 0~1
    }

    function computeScores() {
      scores.rs = scores.ex = scores.rc = scores.em = scores.reg = 0;
      counts.rs = counts.ex = counts.rc = counts.em = counts.reg = 0;

      for (let i = 0; i < TOTAL; i++) {
        const raw = answers[i];
        if (raw == null) continue;

        const axis = axisMap[i];
        if (!axis) continue;

        const val = reverseIndices.has(i) ? (6 - raw) : raw;

        scores[axis] += val;
        counts[axis] += 1;
      }
    }

    function finishTest() {
      computeScores();

      const rsN = normalize(scores.rs, counts.rs);
      const exN = normalize(scores.ex, counts.ex);
      const rcN = normalize(scores.rc, counts.rc);
      const emN = normalize(scores.em, counts.em);
      const regN = normalize(scores.reg, counts.reg);

      // 그래프
      const graphData = [
        { key: "rs", val: rsN },
        { key: "ex", val: exN },
        { key: "rc", val: rcN },
        { key: "em", val: emN },
        { key: "reg", val: regN }
      ];
      graphData.forEach(({ key, val }) => {
        const percent = Math.round(Math.min(Math.max(val, 0), 1) * 100);
        const bar = document.getElementById(`bar-${key}`);
        const label = document.getElementById(`val-${key}`);
        if (bar) bar.style.width = `${percent}%`;
        if (label) label.textContent = `${percent}%`;
      });

      // 유형 프로필(0~1)
      const profiles = {
        SPARK:    [0.9, 0.7, 0.5, 0.6, 0.35],
        RIPPLE:   [0.6, 0.5, 0.35,0.9, 0.45],
        BRIEFING: [0.7, 0.9, 0.5, 0.6, 0.45],
        SPRING:   [0.55,0.5, 0.9, 0.6, 0.7],
        PILOT:    [0.5, 0.5, 0.6, 0.35,0.9],
        COLDBLUE: [0.35,0.35,0.5, 0.4, 0.6],
        ZEROWAVE: [0.4, 0.4, 0.7, 0.4, 0.6],
        BALANCER: [0.5, 0.5, 0.5, 0.5, 0.5]
      };

      const v = [rsN, exN, rcN, emN, regN];
      const maxVal = Math.max(...v);
      const minVal = Math.min(...v);

      let typeKey = "BALANCER";

      if (maxVal - minVal < 0.12) {
        typeKey = "BALANCER";
      } else {
        let bestType = null;
        let bestScore = Infinity;
        Object.entries(profiles).forEach(([key, prof]) => {
          if (key === "BALANCER") return;
          let dist = 0;
          for (let i = 0; i < 5; i++) dist += (v[i] - prof[i]) ** 2;
          if (dist < bestScore) { bestScore = dist; bestType = key; }
        });
        typeKey = bestType || "BALANCER";
      }

      trackEvent('test_complete', {
        event_category: 'engagement',
        event_label: 'EID 감정유형 테스트',
        eid_type: typeKey,
        rs: rsN, ex: exN, rc: rcN, em: emN, reg: regN
      });

      // 유형 데이터(✅ 이미지 파일명 영문)
      const TYPE_DATA = {
        SPARK: {
          name: "스파크형 · Spark Type",
          oneLine: "상황 변화에 즉각 반응하고, 에너지가 번쩍이는 스타터형입니다.",
          keyword: "속도 · 즉흥 · 에너지",
          accent: "#f97316",
          accentSoft: "rgba(254,215,170,0.8)",
          image: "images/spark.png",
          desc: "스파크형은 주변 환경과 사람의 변화에 빠르게 반응하는 타입입니다. 기회 포착과 분위기 전환에는 강점이 크지만, 감정의 속도가 앞서 나가 피곤해질 때도 있습니다.",
          strengths: [
            "변화에 빠르게 반응하며 기회를 먼저 잡는 추진력",
            "분위기가 가라앉을 때 에너지를 끌어올리는 능력",
            "상황 파악과 센스 있는 대응이 가능함",
            "새로운 경험에 호기심이 먼저 올라오는 편"
          ],
          warnings: [
            "순간 감정에 휘둘려 말이나 행동이 앞설 수 있음",
            "에너지 등락이 커서 기복으로 보일 수 있음",
            "중요한 결정일수록 한 번 더 점검이 필요",
            "의도적으로 속도를 줄이는 연습이 도움 됨"
          ]
        },
        RIPPLE: {
          name: "리플형 · Ripple Type",
          oneLine: "타인의 감정이 파문처럼 번져 들어오는, 깊은 공명형입니다.",
          keyword: "공감 · 흡수 · 여운",
          accent: "#0ea5e9",
          accentSoft: "rgba(191,219,254,0.85)",
          image: "images/ripple.png",
          desc: "리플형은 주변 사람의 표정, 말투, 기운을 민감하게 받아들이는 편입니다. 공감 능력이 뛰어나지만 감정 피로도 쌓이기 쉬운 타입입니다.",
          strengths: [
            "상대의 감정까지 읽어내는 섬세함",
            "정서적 지지를 잘 해주는 따뜻함",
            "관계를 입체적으로 바라봄",
            "진심을 담아 사람을 대하는 편"
          ],
          warnings: [
            "타인의 감정까지 떠안아 번아웃이 오기 쉬움",
            "거리두기를 미루다 한 번에 지칠 수 있음",
            "모든 사람을 다 챙기지 못해도 괜찮다는 허용이 필요",
            "하루 중 ‘공감 OFF 시간’ 확보가 도움"
          ]
        },
        BRIEFING: {
          name: "브리핑형 · Briefing Type",
          oneLine: "느낀 것을 말과 표정으로 바로 풀어내는, 표현 중심형입니다.",
          keyword: "표현 · 전달 · 생동감",
          accent: "#ec4899",
          accentSoft: "rgba(251,207,232,0.9)",
          image: "images/briefing.png",
          desc: "브리핑형은 감정이 말과 표정에 비교적 그대로 드러나는 스타일입니다. 솔직함이 장점이지만 강도가 오해를 만들 때도 있습니다.",
          strengths: [
            "분위기를 살리고 사람들을 편하게 만드는 생동감",
            "솔직한 표현으로 신뢰를 얻기 쉬움",
            "좋은 에너지를 주변까지 끌어올리는 힘",
            "자신의 상태를 드러내 적절한 도움을 받기 쉬움"
          ],
          warnings: [
            "감정이 과하게 전달될 수 있음",
            "상대가 더 세게 받아들일 수 있음",
            "말하기 전 톤만 정리해도 효과 큼",
            "참기보다 강도/타이밍 조절 연습이 유익"
          ]
        },
        SPRING: {
          name: "스프링형 · Spring Type",
          oneLine: "한 번 눌려도 다시 튀어 오르는, 회복 탄성형입니다.",
          keyword: "회복 · 탄력 · 재도전",
          accent: "#16a34a",
          accentSoft: "rgba(187,247,208,0.9)",
          image: "images/spring.png",
          desc: "스프링형은 힘든 일이 있어도 비교적 빠르게 균형을 되찾는 편입니다. 안정감을 주지만 감정을 ‘빨리 넘기는’ 습관이 생길 수 있습니다.",
          strengths: [
            "정서적 탄력성이 높음",
            "실수를 발판으로 나아가는 태도",
            "장기 목표를 보고 꾸준히 버팀",
            "주변에 안정감을 주는 존재감"
          ],
          warnings: [
            "겉으로 괜찮아 보여 속감정이 묻힐 수 있음",
            "피로 누적을 무시할 위험",
            "정기적인 컨디션 점검이 필요",
            "한두 명에게 속마음을 나누는 경험이 도움"
          ]
        },
        PILOT: {
          name: "파일럿형 · Pilot Type",
          oneLine: "감정을 전략적으로 다루며, 상황을 조종하는 유형입니다.",
          keyword: "조절 · 전략 · 조타",
          accent: "#0f172a",
          accentSoft: "rgba(209,213,219,0.9)",
          image: "images/pilot.png",
          desc: "파일럿형은 감정을 느끼되, 한 번에 터뜨리기보다 조절하고 관리하는 쪽을 택합니다.",
          strengths: [
            "위기에서도 전체 그림을 잃지 않는 시야",
            "우선순위를 정해 실행 방향을 잡는 능력",
            "목표/결과 중심으로 판단",
            "팀에서 판단을 맡기기 좋은 타입"
          ],
          warnings: [
            "상대에게 차갑게 보일 수 있음",
            "진짜 감정을 뒤로 미루는 습관 위험",
            "머리 정리와 마음 정리가 다를 수 있음",
            "가끔은 감정을 먼저 기록하는 시간이 필요"
          ]
        },
        COLDBLUE: {
          name: "콜드블루형 · Cold Blue Type",
          oneLine: "겉은 차분하지만, 안에서 조용히 처리하는 쿨톤형입니다.",
          keyword: "차분 · 저자극 · 관조",
          accent: "#6b7280",
          accentSoft: "rgba(209,213,219,0.9)",
          image: "images/coldblue.png",
          desc: "콜드블루형은 겉으로 드러나는 폭이 크지 않은 편입니다. 담담함이 강점이지만 도움을 못 받을 수 있습니다.",
          strengths: [
            "격한 상황에서도 안정감을 주는 존재",
            "불필요한 드라마 없이 처리하는 능력",
            "감정에 크게 휘둘리지 않음",
            "차분한 에너지로 신뢰를 얻기 쉬움"
          ],
          warnings: [
            "속마음을 모르겠다는 말을 듣기 쉬움",
            "힘든데도 아무도 눈치 못 챌 수 있음",
            "필요/욕구 표현이 늦어 손해 가능",
            "안전한 관계에서 감정 공유가 필요"
          ]
        },
        ZEROWAVE: {
          name: "제로웨이브형 · Zero Wave Type",
          oneLine: "큰 파동 없이 잔잔함을 유지하는, 저자극 미니멀형입니다.",
          keyword: "저자극 · 안정 · 미니멀",
          accent: "#22c55e",
          accentSoft: "rgba(187,247,208,0.9)",
          image: "images/zerowave.png",
          desc: "제로웨이브형은 예측 가능한 환경을 선호합니다. 편안하지만 변화가 필요한 순간을 놓칠 수 있습니다.",
          strengths: [
            "과도한 자극에도 흔들림이 적음",
            "혼자 있는 시간에도 스스로를 채움",
            "흥분된 상황에서도 판단 유지",
            "함께 있으면 편한 사람으로 보임"
          ],
          warnings: [
            "고민을 드러내지 않아 도움을 못 받을 수 있음",
            "무관심하게 보일 수 있음",
            "변화를 피하기 쉬움",
            "작은 도전이 삶에 활력을 줌"
          ]
        },
        BALANCER: {
          name: "밸런서형 · Balancer Type",
          oneLine: "다섯 축이 비교적 고르게 분포된, 유연한 균형형입니다.",
          keyword: "균형 · 조율 · 유연성",
          accent: "#6366f1",
          accentSoft: "rgba(199,210,254,0.9)",
          image: "images/balancer.png",
          desc: "밸런서형은 큰 쏠림 없이 상황에 맞게 태도를 바꾸는 경향이 있습니다. 조율자·중재자 포지션에 강합니다.",
          strengths: [
            "유연하게 사람들과 어울림",
            "상황에 맞는 태도 선택",
            "감정 소모/폭발이 적은 편",
            "팀에서 균형을 잡는 역할에 적합"
          ],
          warnings: [
            "스스로는 타입이 모호하게 느껴질 수 있음",
            "조용히 받쳐주는 역할에 치우칠 수 있음",
            "과감함이 부족해 보일 수 있음",
            "의도적으로 ‘나만의 색’을 드러내는 연습이 도움"
          ]
        }
      };

      const data = TYPE_DATA[typeKey];
      const root = document.documentElement;

      if (data) {
        const avatar = document.getElementById("typeAvatar");
        const nameEl = document.getElementById("typeName");
        const oneEl = document.getElementById("typeOneLine");
        const keyEl = document.getElementById("typeKeyword");
        const descEl = document.getElementById("typeDesc");
        const sList = document.getElementById("typeStrengths");
        const wList = document.getElementById("typeWarnings");

        if (avatar) {
          avatar.innerHTML = "";
          const img = document.createElement("img");
          img.src = data.image;
          img.alt = data.name;
          avatar.appendChild(img);
        }
        if (nameEl) nameEl.textContent = data.name;
        if (oneEl) oneEl.textContent = data.oneLine;
        if (keyEl) keyEl.textContent = data.keyword;
        if (descEl) descEl.textContent = data.desc;

        if (root) {
          root.style.setProperty("--accent", data.accent);
          root.style.setProperty("--accent-soft", data.accentSoft);
        }

        if (sList) {
          sList.innerHTML = "";
          data.strengths.forEach((item) => {
            const li = document.createElement("li");
            li.textContent = item;
            sList.appendChild(li);
          });
        }

        if (wList) {
          wList.innerHTML = "";
          data.warnings.forEach((item) => {
            const li = document.createElement("li");
            li.textContent = item;
            wList.appendChild(li);
          });
        }
      }

      const progressFill = document.getElementById("progressFill");
      const progressText = document.getElementById("progressText");
      if (progressFill) progressFill.style.width = "100%";
      if (progressText) progressText.textContent = "100% 완료";

      showSection("result");
    }

    // PDF 다운로드
    async function downloadBasicPdf() {
      const resultShell = document.querySelector(".result-shell");
      if (!resultShell) {
        alert("먼저 테스트를 완료한 뒤에 PDF를 다운로드할 수 있습니다.");
        return;
      }
      try {
        const canvas = await html2canvas(resultShell, {
          scale: 2,
          useCORS: true,
          backgroundColor: "#020617"
        });

        const imgData = canvas.toDataURL("image/png");
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({ orientation: "p", unit: "mm", format: "a4" });

        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();

        const pdfWidth = pageWidth - 20;
        const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

        const x = 10;
        const y = pdfHeight < pageHeight ? (pageHeight - pdfHeight) / 2 : 10;

        pdf.addImage(imgData, "PNG", x, y, pdfWidth, pdfHeight, undefined, "FAST");
        pdf.save("EID_기본리포트.pdf");
      } catch (e) {
        console.error(e);
        alert("PDF 생성 중 오류가 발생했습니다. 다시 시도해 주세요.");
      }
    }

    // 공유 버튼(중복 id 제거 -> class 기반)
    document.querySelectorAll(".share-kakao").forEach((btn) => {
      btn.addEventListener("click", () => {
        if (!window.Kakao || !Kakao.isInitialized()) {
          alert("카카오 공유를 사용할 수 없습니다. 잠시 후 다시 시도해 주세요.");
          return;
        }
        Kakao.Share.sendDefault({
          objectType: "feed",
          content: {
            title: "EID 감정유형 테스트",
            description: "5축 기반 감정 패턴 분석",
            imageUrl: CANONICAL_URL + "/og.png",
            link: { mobileWebUrl: CANONICAL_URL, webUrl: CANONICAL_URL }
          },
          buttons: [
            { title: "나도 테스트 해보기", link: { mobileWebUrl: CANONICAL_URL, webUrl: CANONICAL_URL } }
          ]
        });
        trackEvent("share_click", { method: "kakao" });
      });
    });

    document.querySelectorAll(".share-insta").forEach((btn) => {
      btn.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(CANONICAL_URL);
          alert("링크 복사 완료!\n인스타그램 스토리/프로필에 붙여넣어 공유해주세요.");
        } catch (e) {
          prompt("복사를 지원하지 않는 환경입니다. 아래 주소를 복사해주세요:", CANONICAL_URL);
        }
        trackEvent("share_click", { method: "instagram_copy" });
      });
    });
  </script>
</body>
</html>





































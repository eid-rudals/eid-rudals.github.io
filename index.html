<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>EID 감정유형 테스트</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --bg: #050814;
      --card-bg: rgba(18, 24, 38, 0.88);
      --card-border: rgba(255, 255, 255, 0.05);
      --accent: #5b8dff;
      --accent-soft: rgba(91, 141, 255, 0.2);
      --text-main: #f5f6fa;
      --text-sub: #a9afc7;
      --danger: #ff5c7a;
      --radius-xl: 28px;
      --radius-lg: 20px;
      --shadow-soft: 0 24px 60px rgba(0, 0, 0, 0.55);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Pretendard", system-ui,
        sans-serif;
      background: radial-gradient(circle at top, #11172b 0, #050814 55%, #02030a 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 16px 80px;
    }

    .app {
      width: 100%;
      max-width: 1080px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding: 8px 4px;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #9ea6ff;
    }

    .logo-pill {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(158, 166, 255, 0.4);
      background: radial-gradient(circle at top left, rgba(180, 195, 255, 0.28), transparent);
      color: var(--text-sub);
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .panel {
      border-radius: var(--radius-xl);
      background: radial-gradient(circle at top left, rgba(91, 141, 255, 0.2), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(178, 116, 255, 0.2), transparent 55%),
                  linear-gradient(135deg, #111523, #060918 55%, #04030f);
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--card-border);
      padding: 28px 26px;
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: 0;
      backdrop-filter: blur(22px);
      -webkit-backdrop-filter: blur(22px);
      opacity: 0.85;
      pointer-events: none;
    }

    .panel-content {
      position: relative;
      z-index: 1;
    }

    h1 {
      font-size: clamp(26px, 4vw, 32px);
      letter-spacing: -0.03em;
      margin-bottom: 10px;
    }

    h1 span.highlight {
      background: linear-gradient(90deg, #90b2ff, #e6a5ff);
      -webkit-background-clip: text;
      color: transparent;
    }

    .subtitle {
      font-size: 14px;
      color: var(--text-sub);
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .intro-grid {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.3fr);
      gap: 22px;
      align-items: stretch;
    }

    @media (max-width: 768px) {
      body {
        padding: 24px 10px 56px;
      }
      .panel {
        padding: 22px 18px;
        border-radius: 20px;
      }
      .intro-grid {
        grid-template-columns: 1fr;
      }
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .chip {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(190, 198, 255, 0.4);
      color: #cdd3ff;
      background: radial-gradient(circle at top, rgba(190, 198, 255, 0.22), transparent 55%);
    }

    .meta-card {
      border-radius: 18px;
      padding: 12px 14px;
      border: 1px solid rgba(120, 130, 200, 0.45);
      background: linear-gradient(135deg, rgba(13, 16, 35, 0.9), rgba(12, 14, 29, 0.98));
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px 14px;
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 4px;
    }

    .meta-label {
      color: #7f8bff;
      font-size: 11px;
      margin-bottom: 2px;
    }

    .meta-value {
      color: #e5e7ff;
      font-weight: 500;
    }

    .start-card {
      border-radius: 22px;
      padding: 20px 18px;
      border: 1px solid rgba(250, 250, 255, 0.06);
      background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.08), transparent 55%),
                  linear-gradient(135deg, rgba(3, 4, 14, 0.98), rgba(11, 12, 28, 0.98));
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 14px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.35);
      color: #cbd2ff;
      font-size: 11px;
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #7bf5ff;
    }

    .start-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .start-text {
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .btn-primary {
      margin-top: 4px;
      width: 100%;
      padding: 12px 16px;
      border-radius: 999px;
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.02em;
      color: #02030b;
      background: linear-gradient(135deg, #93b4ff, #f2a5ff);
      box-shadow: 0 14px 30px rgba(118, 158, 255, 0.5);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      filter: brightness(1.02);
      box-shadow: 0 18px 40px rgba(118, 158, 255, 0.7);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 8px 18px rgba(118, 158, 255, 0.55);
    }

    .progress-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      gap: 12px;
    }

    .progress-label {
      font-size: 13px;
      color: #c8ceff;
    }

    .progress-bar {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(48, 55, 90, 0.9);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, #7aa3ff, #f19aff);
      width: 0%;
      transition: width 0.25s ease-out;
    }

    .question-index {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .question-text {
      font-size: 16px;
      line-height: 1.7;
      margin-bottom: 18px;
    }

    .scale-row {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 6px;
    }

    .choices {
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .choice {
      flex: 1;
      height: 34px;
      border-radius: 999px;
      border: 1px solid rgba(90, 101, 160, 0.8);
      background: rgba(8, 10, 24, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--text-sub);
      cursor: pointer;
      transition: all 0.15s ease;
      user-select: none;
    }

    .choice.selected {
      background: radial-gradient(circle at top, rgba(147, 180, 255, 0.36), rgba(106, 122, 255, 0.75));
      border-color: rgba(211, 222, 255, 0.95);
      color: #050713;
      box-shadow: 0 0 0 1px rgba(240, 240, 255, 0.1), 0 12px 26px rgba(86, 111, 247, 0.7);
    }

    .nav-row {
      display: flex;
      justify-content: space-between;
      margin-top: 22px;
      gap: 10px;
    }

    .btn-secondary,
    .btn-ghost {
      flex: 1;
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 13px;
      cursor: pointer;
      border: 1px solid rgba(112, 123, 170, 0.7);
      background: rgba(8, 11, 26, 0.9);
      color: #d2d6ff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: all 0.12s ease;
    }

    .btn-ghost {
      border-style: dashed;
      opacity: 0.7;
    }

    .btn-secondary:hover,
    .btn-ghost:hover {
      background: rgba(17, 22, 44, 1);
      border-color: rgba(147, 162, 230, 0.95);
      opacity: 1;
    }

    .btn-secondary.primary {
      background: linear-gradient(135deg, #7e9eff, #f19bff);
      border-color: transparent;
      color: #050814;
      box-shadow: 0 12px 26px rgba(119, 150, 255, 0.7);
    }

    .btn-secondary.primary:hover {
      filter: brightness(1.04);
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .pill {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(16, 24, 58, 0.9);
      color: #c2c9ff;
    }

    /* 결과 영역 */

    .result-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr);
      gap: 24px;
    }

    @media (max-width: 840px) {
      .result-layout {
        grid-template-columns: 1fr;
      }
    }

    .result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .result-type-code {
      font-size: 13px;
      color: #9fa7ff;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 2px;
    }

    .result-type-name {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.03em;
      margin-bottom: 4px;
    }

    .result-type-tagline {
      font-size: 13px;
      color: var(--text-sub);
    }

    .result-chip {
      padding: 5px 12px;
      border-radius: 999px;
      border: 1px solid rgba(155, 189, 255, 0.8);
      font-size: 11px;
      color: #d7e0ff;
      background: radial-gradient(circle at top, rgba(130, 164, 255, 0.4), transparent);
    }

    .character-card {
      border-radius: var(--radius-lg);
      padding: 16px 14px;
      background: linear-gradient(145deg, rgba(9, 12, 30, 0.95), rgba(5, 7, 18, 0.98));
      border: 1px solid var(--card-border);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .character-avatar-wrap {
      width: 160px;
      height: 160px;
      border-radius: 26px;
      overflow: hidden;
      background: radial-gradient(circle at top, rgba(148, 178, 255, 0.4), rgba(12, 15, 35, 1));
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 18px 40px rgba(10, 12, 30, 0.85);
    }

    .character-avatar {
      width: 92%;
      height: auto;
      object-fit: cover;
      border-radius: 20px;
    }

    .character-role {
      font-size: 12px;
      color: #bec6ff;
    }

    .character-desc {
      font-size: 12px;
      color: var(--text-sub);
      text-align: center;
      line-height: 1.6;
    }

    .section-title {
      font-size: 13px;
      color: #c2c8ff;
      margin-bottom: 6px;
    }

    .traits-list {
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.7;
    }

    .traits-list li {
      margin-left: 14px;
      margin-bottom: 2px;
    }

    .score-bars {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    .score-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-sub);
    }

    .score-row span {
      min-width: 64px;
    }

    .score-track {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(40, 47, 80, 0.85);
      overflow: hidden;
    }

    .score-fill {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, #7fa6ff, #f39bff);
      width: 0%;
      transition: width 0.3s ease-out;
    }

    .recommend-box {
      border-radius: 18px;
      padding: 12px 14px;
      border: 1px solid rgba(129, 140, 255, 0.55);
      background: radial-gradient(circle at top left, rgba(129, 140, 255, 0.22), transparent 55%),
                  linear-gradient(135deg, rgba(6, 8, 22, 0.96), rgba(12, 13, 30, 0.98));
      font-size: 12px;
      color: var(--text-sub);
      line-height: 1.7;
      margin-top: 8px;
    }

    .footer-note {
      margin-top: 10px;
      font-size: 11px;
      color: #7c82a5;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <div class="logo-text">EID EMOTION ID</div>
        <div class="logo-pill">Emotion Pattern Diagnostic</div>
      </div>
      <div class="logo-pill">Beta · 개인 감정 사용 습관 리포트</div>
    </header>

    <main>
      <!-- 인트로 -->
      <section id="introSection" class="panel">
        <div class="panel-content">
          <div class="intro-grid">
            <div>
              <div class="chip-row">
                <div class="chip">EID 감정 패턴 분석 검사</div>
                <div class="chip">MBTI + Big5 관점 적용</div>
              </div>
              <h1>
                같은 상황에서도<br />
                <span class="highlight">당신의 감정 사용 습관</span>은<br />
                완전히 다르게 작동합니다.
              </h1>
              <p class="subtitle">
                같은 상황에서도 사람마다 감정을 느끼고 쓰는 방식은 크게 다릅니다.<br />
                EID 감정유형 테스트는 총 5개의 축<br />
                <strong>반응 속도 · 표현 방식 · 회복력 · 공명(공감) · 조절</strong>을 통해<br />
                당신의 감정 패턴을 구조적으로 살펴보는 전문 성향 검사입니다.
              </p>
              <div class="meta-card">
                <div>
                  <div class="meta-label">소요 시간</div>
                  <div class="meta-value">약 5분</div>
                </div>
                <div>
                  <div class="meta-label">문항 수</div>
                  <div class="meta-value">총 24문항 (예시)</div>
                </div>
                <div>
                  <div class="meta-label">검사 유형</div>
                  <div class="meta-value">감정 패턴 성향 검사</div>
                </div>
                <div>
                  <div class="meta-label">이용 비용</div>
                  <div class="meta-value">전액 무료 · 익명</div>
                </div>
              </div>
            </div>

            <div class="start-card">
              <div>
                <div class="badge">
                  <span class="badge-dot"></span>
                  오늘 기준, 나의 감정 사용 패턴
                </div>
                <div class="start-title">지금의 나, 감정을 어떻게 쓰고 있을까?</div>
                <p class="start-text">
                  이 검사는 진단명이 아니라 <strong>성향과 습관</strong>을 이해하기 위한 도구입니다.
                  솔직하게 응답할수록, 나에게 가까운 리포트를 받을 수 있습니다.
                </p>
              </div>
              <button id="startBtn" class="btn-primary">
                무료 테스트 시작하기
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- 테스트 영역 -->
      <section id="testSection" class="panel" hidden>
        <div class="panel-content">
          <div class="progress-row">
            <div class="progress-label" id="progressLabel">1 / 24</div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
          </div>

          <div class="question-index" id="questionIndex">문항 1</div>
          <div class="question-text" id="questionText">
            질문 텍스트
          </div>

          <div class="scale-row">
            <span>전혀 그렇지 않다</span>
            <span>매우 그렇다</span>
          </div>
          <div class="choices" id="choices">
            <!-- JS로 선택지 생성 -->
          </div>

          <div class="nav-row">
            <button id="prevBtn" class="btn-ghost">이전</button>
            <button id="nextBtn" class="btn-secondary primary">
              다음
            </button>
          </div>
        </div>
      </section>

      <!-- 결과 영역 -->
      <section id="resultSection" class="panel" hidden>
        <div class="panel-content">
          <div class="result-layout">
            <div>
              <div class="result-header">
                <div>
                  <div class="result-type-code" id="resultCode">EID · TYPE</div>
                  <div class="result-type-name" id="resultName">유형 이름</div>
                  <div class="result-type-tagline" id="resultTagline">
                    당신의 감정 사용 습관을 한 문장으로 요약하면…
                  </div>
                </div>
                <div class="result-chip" id="resultShortLabel">감정 패턴 프로파일</div>
              </div>

              <div class="pill-row" id="resultKeywords">
                <!-- 키워드 pill -->
              </div>

              <div class="section-title">당신의 감정 사용 구조</div>
              <div class="score-bars" id="scoreBars">
                <!-- 점수 바 -->
              </div>

              <div class="section-title" style="margin-top:14px;">이 유형의 특징</div>
              <ul class="traits-list" id="resultTraits">
                <!-- 특징 리스트 -->
              </ul>

              <div class="section-title" style="margin-top:14px;">일상에서의 활용 팁</div>
              <div class="recommend-box" id="resultAdvice">
                <!-- 조언 -->
              </div>

              <div class="footer-note">
                · 본 검사는 참고용 성향 분석으로, 의학적·임상적 진단을 대신하지 않습니다.<br />
                · 결과가 마음에 들지 않아도 괜찮습니다. 오늘의 나를 이해하는 하나의 관점일 뿐입니다.
              </div>
            </div>

            <div>
              <div class="character-card">
                <div class="character-avatar-wrap">
                  <img id="resultCharacter" class="character-avatar" src="" alt="감정유형 캐릭터"/>
                </div>
                <div class="character-role" id="characterRole">
                  역할 / 직군 이미지
                </div>
                <div class="character-desc" id="characterDesc">
                  캐릭터 설명
                </div>
                <button id="restartBtn" class="btn-secondary" style="margin-top:8px;width:100%;">
                  다시 검사하기
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // -------------------------------
    // 질문 데이터 (예시 24문항)
    // -------------------------------
    // dimension: speed / expression / recovery / resonance / control
    // direction: 1(높을수록 그렇다) / -1(낮을수록 그렇다 쪽)
    const questions = [
      {
        text: "예상치 못한 상황이 벌어지면, 생각보다 먼저 몸이나 표정이 먼저 반응한다.",
        dimension: "speed",
        direction: 1,
      },
      {
        text: "갈등 상황이 생겨도 일단 표정과 목소리를 최대한 차분하게 유지하려 한다.",
        dimension: "expression",
        direction: -1,
      },
      {
        text: "마음에 상처되는 일이 있어도, 하루 이틀이면 꽤 금방 일상 모드로 돌아온다.",
        dimension: "recovery",
        direction: 1,
      },
      {
        text: "주변 사람의 말투나 분위기가 바뀌면, 이유를 알기 전에 먼저 마음이 같이 흔들린다.",
        dimension: "resonance",
        direction: 1,
      },
      {
        text: "감정이 올라와도 '지금은 표현하면 안 된다' 싶으면 꽤 잘 눌러 두는 편이다.",
        dimension: "control",
        direction: 1,
      },
      {
        text: "누가 나를 갑자기 불렀을 때, 몸이 먼저 움찔하고 나서 생각이 따라오는 편이다.",
        dimension: "speed",
        direction: 1,
      },
      {
        text: "기분이 안 좋아도, 겉으로는 거의 티가 안 나는 편이다.",
        dimension: "expression",
        direction: -1,
      },
      {
        text: "한 번 크게 실망한 일은 시간이 꽤 지나도 자꾸 떠오르고 오래 간다.",
        dimension: "recovery",
        direction: -1,
      },
      {
        text: "영화나 드라마를 볼 때, 등장인물의 감정에 과몰입해서 같이 울거나 화난다.",
        dimension: "resonance",
        direction: 1,
      },
      {
        text: "감정에 휩쓸리는 것보다 상황을 분석하는 것이 더 먼저라고 느낀다.",
        dimension: "control",
        direction: 1,
      },
      {
        text: "예상하지 못한 말이나 행동을 들으면, 머리속이 잠깐 하얘지며 멍해진다.",
        dimension: "speed",
        direction: -1,
      },
      {
        text: "좋은 일이 생기면, 주변 사람들에게 티가 날 정도로 신나서 말하게 된다.",
        dimension: "expression",
        direction: 1,
      },
      {
        text: "스트레스가 쌓이면, 충분히 쉬어도 쉽게 풀리지 않고 몸까지 무거워진다.",
        dimension: "recovery",
        direction: -1,
      },
      {
        text: "누군가 힘들다고 말하면, 해결책보다 먼저 그 사람의 마음이 어떨지 상상이 된다.",
        dimension: "resonance",
        direction: 1,
      },
      {
        text: "감정 때문에 일을 망치는 게 싫어서, 중요한 자리에서는 스스로를 꽤 엄격히 컨트롤한다.",
        dimension: "control",
        direction: 1,
      },
      {
        text: "평소에도 사소한 일에 자주 놀라거나, 분위기 변화를 예민하게 감지하는 편이다.",
        dimension: "speed",
        direction: 1,
      },
      {
        text: "기쁘거나 화가 나도, 스스로 '이 정도면 됐다' 싶으면 감정을 스위치 끄듯 줄일 수 있다.",
        dimension: "expression",
        direction: -1,
      },
      {
        text: "힘든 일이 있어도, '그래도 괜찮아' 하며 스스로를 달래는 편이다.",
        dimension: "recovery",
        direction: 1,
      },
      {
        text: "주변 사람의 말투나 표정이 조금만 변해도 눈에 잘 들어오는 편이다.",
        dimension: "resonance",
        direction: 1,
      },
      {
        text: "감정적으로 격해지면, 일부러 말수를 줄이고 상황을 한 걸음 떨어져서 본다.",
        dimension: "control",
        direction: 1,
      },
      {
        text: "나는 감정이 생기면, 천천히 올라와 오래 머무는 편이다.",
        dimension: "speed",
        direction: -1,
      },
      {
        text: "가까운 사람에게는 기분이 얼굴과 말투에 바로 드러나는 편이다.",
        dimension: "expression",
        direction: 1,
      },
      {
        text: "컨디션이 안 좋아도, 나만의 회복 루틴(취미·휴식 방식 등)이 꽤 잘 잡혀 있다.",
        dimension: "recovery",
        direction: 1,
      },
      {
        text: "어떤 공간에 들어가면, 먼저 사람들의 감정 분위기부터 느껴지는 편이다.",
        dimension: "resonance",
        direction: 1,
      }
    ];

    // -------------------------------
    // 유형 정의 (하이엔드 웹툰 캐릭터 8종)
    // -------------------------------
    const types = {
      observer: {
        code: "OBSERVER",
        name: "오브저버",
        tagline: "멀리서 전체를 읽어내는, 조용한 분석가형",
        shortLabel: "차분한 관찰 · 구조적 사고",
        keywords: ["데이터 분석가 느낌", "조용한 관찰자", "감정보다 구조"],
        traits: [
          "상황을 한 발짝 떨어져서 보는 편이며, 감정보다 정보와 맥락을 먼저 본다.",
          "감정 표현은 절제되어 있지만, 안에서는 꽤 많은 생각이 오간다.",
          "문제를 감정으로 풀기보다, 구조를 재정리해서 해결하려 한다."
        ],
        advice:
          "감정보다 생각이 앞서는 강점 덕분에, 위기 상황에서도 전체 그림을 읽어낼 수 있습니다. 다만 주변에서는 당신의 속마음을 잘 모를 수 있어요. 안전하다고 느껴지는 사람에게는 의도적으로 감정을 '조금 더 나누는 연습'을 해보면 관계의 밀도가 크게 올라갑니다.",
        characterRole: "데이터 분석가 · 리서처 느낌",
        characterDesc:
          "차가운 파랑 톤의 조용한 분석가 캐릭터. 얇은 금테 안경과 메모보드를 들고 전체 흐름을 관찰하는 모습입니다.",
        image: "observer.png"
      },
      reactor: {
        code: "REACTOR",
        name: "리액터",
        tagline: "상황에 즉각 반응하는, 예민한 레이더형",
        shortLabel: "빠른 반응 · 순간 감정 폭발",
        keywords: ["속도 빠름", "예민한 감지", "순간적인 표현"],
        traits: [
          "상황 변화에 누구보다 빨리 반응하고, 몸과 표정이 즉각적으로 움직인다.",
          "놀람·분노·당혹감 같은 감정이 짧게, 그러나 강하게 올라오는 편이다.",
          "위기 상황에서 즉각적인 대처가 필요한 역할에 강점을 발휘한다."
        ],
        advice:
          "당신의 예민함과 빠른 반응은 큰 자산입니다. 다만 감정의 '첫 반응'이 전부는 아니라는 것만 기억해두면 좋습니다. 속으로 한 번 더 숨을 고른 뒤, 표현 강도를 10 중 7 정도로 맞추는 연습을 해보면 관계에서 피로감이 줄어듭니다.",
        characterRole: "응급실 의사 · 속보 기자 느낌",
        characterDesc:
          "강렬한 오렌지 레드 조명 아래, 놀람과 집중이 동시에 섞인 표정의 캐릭터. 언제든 뛰어나갈 준비가 된 모습입니다.",
        image: "reactor.png"
      },
      harmonizer: {
        code: "HARMONIZER",
        name: "하모나이저",
        tagline: "사람 사이의 온도를 맞추는, 공감 조율가형",
        shortLabel: "공감력 높음 · 감정 미세조율",
        keywords: ["상담사 느낌", "분위기 메이커", "조화 추구"],
        traits: [
          "사람들의 말 뒤에 숨은 감정에 자연스럽게 귀 기울인다.",
          "본인의 감정보다 '분위기 전체'가 편안한지가 더 신경 쓰인다.",
          "갈등 상황에서는 본능적으로 중간에서 조율자의 역할을 맡게 된다."
        ],
        advice:
          "당신의 공감 능력은 주변 사람에게 큰 위로가 됩니다. 다만 모든 분위기를 책임질 필요는 없습니다. '여기까지만 신경 쓰자'는 나만의 경계를 정해두면 감정 에너지를 오래 지킬 수 있습니다.",
        characterRole: "상담사 · 소셜 워커 느낌",
        characterDesc:
          "따뜻한 베이지와 라일락 톤의 부드러운 캐릭터. 잔잔한 미소와 둥근 실루엣으로 주변 사람의 긴장을 풀어 줍니다.",
        image: "harmonizer.png"
      },
      builder: {
        code: "BUILDER",
        name: "빌더",
        tagline: "일을 끝까지 밀어붙이는, 실행 중심형",
        shortLabel: "행동 우선 · 실무에 강함",
        keywords: ["PM 느낌", "현실 감각", "결과 지향"],
        traits: [
          "감정이 복잡해도, 일단 해야 할 일을 끝내는 것을 우선순위에 둔다.",
          "해야 할 일과 감정은 어느 정도 분리해서 다루는 편이다.",
          "실행력과 책임감이 강해, 주변에서 '믿고 맡길 사람'으로 여겨진다."
        ],
        advice:
          "당신의 실행력 덕분에 많은 일들이 실제로 굴러갑니다. 다만 감정이 밀린 채로 남아 있으면 어느 날 한 번에 나올 수 있어요. 중요한 프로젝트가 끝난 뒤에는 의도적으로 감정 정리 시간을 만들어 두면 좋습니다.",
        characterRole: "프로젝트 매니저 · 엔지니어 느낌",
        characterDesc:
          "짙은 네이비 수트와 단단한 눈빛의 캐릭터. 손목시계를 확인하며 다음 스텝을 준비하는 모습입니다.",
        image: "builder.png"
      },
      dreamer: {
        code: "DREAMER",
        name: "드리머",
        tagline: "감정과 상상을 섞어 만드는, 감성 크리에이터형",
        shortLabel: "풍부한 내면 · 감각적 표현",
        keywords: ["창작자 느낌", "몰입형", "감성 풍부"],
        traits: [
          "장면·대사·상황을 머릿속에서 생생하게 다시 재생해 보는 편이다.",
          "감정이 예술·아이디어·콘텐츠로 자연스럽게 흘러나온다.",
          "혼자만의 시간에서 에너지를 채우고, 깊은 몰입을 경험한다."
        ],
        advice:
          "당신의 감정과 상상력은 강력한 창작 자원입니다. 다만 혼자만의 세계에 오래 머무르면 현실 감각이 흐려질 수 있어요. '바깥 세계와 연결되는 루틴'을 하나 정해 두면 균형 잡힌 드리머로 성장할 수 있습니다.",
        characterRole: "일러스트레이터 · 크리에이터 느낌",
        characterDesc:
          "파스텔 민트와 핑크톤의 몽환적인 캐릭터. 볼을 살짝 괴고 먼 곳을 바라보는 눈빛이 인상적입니다.",
        image: "dreamer.png"
      },
      anchor: {
        code: "ANCHOR",
        name: "앵커",
        tagline: "흔들리는 판 위에서 중심을 잡는, 안정 지향형",
        shortLabel: "감정 기복 적음 · 의미 추구",
        keywords: ["행정가 느낌", "묵직한 안정감", "신뢰감"],
        traits: [
          "웬만한 일에는 크게 동요하지 않고, 기본 템포를 꾸준히 유지한다.",
          "감정보다는 원칙·절차·합리성에 따라 판단하려 한다.",
          "주변 사람에게 '든든하다', '흔들리지 않는다'는 인상을 준다."
        ],
        advice:
          "당신의 안정감은 팀과 관계의 기둥 역할을 합니다. 다만 자신의 감정을 지나치게 '안전한 곳'에만 넣어 두면, 스스로도 무엇을 느끼는지 모를 수 있어요. 신뢰하는 사람에게는 감정을 조금 더 나누어 보는 연습이 도움이 됩니다.",
        characterRole: "공무원 · 행정가 느낌",
        characterDesc:
          "단정한 네이비 톤의 캐릭터. 서류를 차분히 들고 상황을 정리하는 모습이 인상적입니다.",
        image: "anchor.png"
      },
      spark: {
        code: "SPARK",
        name: "스파크",
        tagline: "공기를 바꾸는 한 방의 에너지, 활기 촉발형",
        shortLabel: "외향 에너지 · 분위기 전환",
        keywords: ["트레이너 느낌", "에너지 메이커", "즉흥적 즐거움"],
        traits: [
          "기분이 좋아지면 분위기가 눈에 띄게 달아오를 정도로 에너지가 크다.",
          "사람들과 함께할 때 감정 에너지가 훨씬 잘 살아난다.",
          "새로운 시도와 자극을 좋아하고, 몸을 움직이는 걸 통해 감정을 푼다."
        ],
        advice:
          "당신의 존재만으로도 공간의 온도가 올라갑니다. 다만 모든 자리를 살려야 한다는 부담까지 짊어질 필요는 없어요. '여기서는 굳이 spark가 되지 않아도 된다'는 상황을 스스로 허락해 주면 에너지를 오래 유지할 수 있습니다.",
        characterRole: "운동 트레이너 · 엔터테이너 느낌",
        characterDesc:
          "선명한 옐로우 포인트의 캐릭터. 크게 웃으며 손을 번쩍 드는 포즈가 특징입니다.",
        image: "spark.png"
      },
      protector: {
        code: "PROTECTOR",
        name: "프로텍터",
        tagline: "내 사람과 일을 끝까지 지키는, 방어 수호형",
        shortLabel: "책임감 · 방어 본능",
        keywords: ["소방관 느낌", "방어적 보호", "의리"],
        traits: [
          "중요한 사람이나 맡은 일에 대해서는 끝까지 책임지려고 한다.",
          "위협을 감지하면, 먼저 '지켜야 할 것'이 무엇인지부터 떠올린다.",
          "감정 표현은 크지 않지만, 결심했을 때의 힘은 상당하다."
        ],
        advice:
          "당신의 책임감과 보호 본능은 누군가에게 큰 안전감으로 다가옵니다. 다만 모든 것을 혼자 떠맡을수록 지치는 속도도 빨라집니다. '여기까지가 내 몫'을 정리하고, 나머지는 함께 나눌 사람을 찾는 것이 장기적으로 더 건강한 방식입니다.",
        characterRole: "소방관 · 경호원 느낌",
        characterDesc:
          "어두운 레드와 블랙 톤의 캐릭터. 등에 손을 얹어 '괜찮다'는 메시지를 전하는 모습입니다.",
        image: "protector.png"
      }
    };

    // -------------------------------
    // 상태 관리
    // -------------------------------
    let currentIndex = 0;
    const answers = Array(questions.length).fill(null);

    const scores = {
      speed: 0,
      expression: 0,
      recovery: 0,
      resonance: 0,
      control: 0
    };

    // -------------------------------
    // DOM
    // -------------------------------
    const introSection = document.getElementById("introSection");
    const testSection = document.getElementById("testSection");
    const resultSection = document.getElementById("resultSection");

    const startBtn = document.getElementById("startBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const restartBtn = document.getElementById("restartBtn");

    const progressLabel = document.getElementById("progressLabel");
    const progressFill = document.getElementById("progressFill");
    const questionIndexEl = document.getElementById("questionIndex");
    const questionTextEl = document.getElementById("questionText");
    const choicesEl = document.getElementById("choices");

    const resultCodeEl = document.getElementById("resultCode");
    const resultNameEl = document.getElementById("resultName");
    const resultTaglineEl = document.getElementById("resultTagline");
    const resultShortLabelEl = document.getElementById("resultShortLabel");
    const resultKeywordsEl = document.getElementById("resultKeywords");
    const resultTraitsEl = document.getElementById("resultTraits");
    const resultAdviceEl = document.getElementById("resultAdvice");
    const scoreBarsEl = document.getElementById("scoreBars");
    const resultCharacterEl = document.getElementById("resultCharacter");
    const characterRoleEl = document.getElementById("characterRole");
    const characterDescEl = document.getElementById("characterDesc");

    // Likert 1~5 라벨
    const scaleLabels = ["1", "2", "3", "4", "5"];

    function renderQuestion() {
      const q = questions[currentIndex];
      progressLabel.textContent = `${currentIndex + 1} / ${questions.length}`;
      progressFill.style.width = `${
        ((currentIndex + 1) / questions.length) * 100
      }%`;
      questionIndexEl.textContent = `문항 ${currentIndex + 1}`;
      questionTextEl.textContent = q.text;

      choicesEl.innerHTML = "";
      scaleLabels.forEach((label, idx) => {
        const value = idx + 1;
        const btn = document.createElement("button");
        btn.className = "choice";
        btn.textContent = value;
        if (answers[currentIndex] === value) {
          btn.classList.add("selected");
        }
        btn.addEventListener("click", () => {
          answers[currentIndex] = value;
          document
            .querySelectorAll(".choice")
            .forEach((el) => el.classList.remove("selected"));
          btn.classList.add("selected");
        });
        choicesEl.appendChild(btn);
      });

      prevBtn.disabled = currentIndex === 0;
      nextBtn.textContent =
        currentIndex === questions.length - 1 ? "결과 보기" : "다음";
    }

    function calculateScores() {
      // 초기화
      scores.speed = 0;
      scores.expression = 0;
      scores.recovery = 0;
      scores.resonance = 0;
      scores.control = 0;

      questions.forEach((q, idx) => {
        const answer = answers[idx] ?? 3; // 미응답은 중간값
        // 1~5 -> -2 ~ +2 로 변환
        const centered = answer - 3; // -2,-1,0,1,2
        const weighted = centered * q.direction;
        scores[q.dimension] += weighted;
      });

      return scores;
    }

    function normalizeScore(raw, maxAbs) {
      // -maxAbs ~ +maxAbs -> 0 ~ 100
      const clamped = Math.max(-maxAbs, Math.min(maxAbs, raw));
      return Math.round(((clamped + maxAbs) / (2 * maxAbs)) * 100);
    }

    function determineType(normalized) {
      const high = {};
      Object.keys(normalized).forEach((key) => {
        high[key] = normalized[key] >= 55; // 55 이상이면 높은 축
      });

      // 간단한 의사결정 트리 (8유형)
      if (!high.speed && high.control && !high.resonance) {
        return "observer";
      }
      if (high.speed && high.expression && !high.control) {
        return "reactor";
      }
      if (high.resonance && !high.control && high.expression) {
        return "harmonizer";
      }
      if (high.control && !high.resonance && high.recovery) {
        return "builder";
      }
      if (!high.control && high.resonance && !high.speed && high.recovery) {
        return "dreamer";
      }
      if (high.control && !high.speed && !high.expression) {
        return "anchor";
      }
      if (high.speed && high.expression && high.resonance) {
        return "spark";
      }
      // 기본값: protector
      return "protector";
    }

    function renderScores(normalized) {
      scoreBarsEl.innerHTML = "";
      const labels = {
        speed: "반응 속도",
        expression: "표현 방식",
        recovery: "회복력",
        resonance: "공명(공감)",
        control: "조절"
      };
      Object.keys(labels).forEach((key) => {
        const row = document.createElement("div");
        row.className = "score-row";
        const label = document.createElement("span");
        label.textContent = labels[key];
        const track = document.createElement("div");
        track.className = "score-track";
        const fill = document.createElement("div");
        fill.className = "score-fill";
        fill.style.width = normalized[key] + "%";
        track.appendChild(fill);
        const val = document.createElement("span");
        val.style.minWidth = "34px";
        val.style.textAlign = "right";
        val.textContent = normalized[key];
        row.appendChild(label);
        row.appendChild(track);
        row.appendChild(val);
        scoreBarsEl.appendChild(row);
      });
    }

    function renderResult() {
      const raw = calculateScores();
      // 대략 최대 절대값 추정: 24문항 / 각 축당 5문항 정도 * 2
      const maxAbs = 12;
      const normalized = {
        speed: normalizeScore(raw.speed, maxAbs),
        expression: normalizeScore(raw.expression, maxAbs),
        recovery: normalizeScore(raw.recovery, maxAbs),
        resonance: normalizeScore(raw.resonance, maxAbs),
        control: normalizeScore(raw.control, maxAbs)
      };

      const typeKey = determineType(normalized);
      const t = types[typeKey];

      resultCodeEl.textContent = `EID · ${t.code}`;
      resultNameEl.textContent = t.name;
      resultTaglineEl.textContent = t.tagline;
      resultShortLabelEl.textContent = t.shortLabel;

      resultKeywordsEl.innerHTML = "";
      t.keywords.forEach((kw) => {
        const pill = document.createElement("div");
        pill.className = "pill";
        pill.textContent = kw;
        resultKeywordsEl.appendChild(pill);
      });

      resultTraitsEl.innerHTML = "";
      t.traits.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = item;
        resultTraitsEl.appendChild(li);
      });

      resultAdviceEl.textContent = t.advice;

      renderScores(normalized);

      // 캐릭터 이미지 (이미지는 /images 폴더에 넣고 경로 맞춰주기)
      resultCharacterEl.src = "images/" + t.image;
      resultCharacterEl.alt = t.name + " 캐릭터";
      characterRoleEl.textContent = t.characterRole;
      characterDescEl.textContent = t.characterDesc;
    }

    // -------------------------------
    // 이벤트
    // -------------------------------
    startBtn.addEventListener("click", () => {
      introSection.hidden = true;
      testSection.hidden = false;
      renderQuestion();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    prevBtn.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex--;
        renderQuestion();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (answers[currentIndex] == null) {
        // 미응답 방지 원하면 alert 추가 가능
      }
      if (currentIndex < questions.length - 1) {
        currentIndex++;
        renderQuestion();
      } else {
        // 결과 보기
        testSection.hidden = true;
        resultSection.hidden = false;
        renderResult();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    });

    restartBtn.addEventListener("click", () => {
      currentIndex = 0;
      for (let i = 0; i < answers.length; i++) answers[i] = null;
      introSection.hidden = false;
      testSection.hidden = true;
      resultSection.hidden = true;
      progressFill.style.width = "0%";
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  </script>
</body>
</html>











